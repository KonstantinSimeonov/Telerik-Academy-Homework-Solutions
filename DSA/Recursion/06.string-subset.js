var subsets = (function () {

	function getNumbers(n) {

		var result = [],
			i;

		for (i = 0; i < n; i++) {
			result[i] = i + 1;
		}

		return result;
	}

	function getCombinations(set, order) {

		if (order == set.length) {
			return [set];
		}

		if (order == 1) {
			return set.map(function (x) {
				return [x];
			});
		}

		var head,
			tails,
			combs = [],
			i,
			j;

		for (i = 0, length = set.length; i < length; i++) {

			head = set[i];
			// only difference is that you don't start slicing from i, but from i + 1 to exclude cases like (1, 1)
			tails = getCombinations(set.slice(i + 1), order - 1);

			for (j = 0; j < tails.length; j++) {
				combs.push([head].concat(tails[j]));
			}
		}

		return combs;
	}

	function subsets(set, order) {

		var indeces = getCombinations(getNumbers(set.length), order),
			result = [],
			currentSubset;
		
		// using the indeces generated by the getCombinations function,
		// we can combine the elements at those indeces
		indeces.forEach(function (indexSet) {

			currentSubset = [];

			indexSet.forEach(function (i) {
				currentSubset.push(set[i - 1]);
			});

			result.push(currentSubset);
		});

		return result;
	}

	return subsets;
} ());

// po kolko nachina mogat moite preateli da se kombinirat v otbor po trima za otborna po dsa? za edin preatel pitam
// var preateli = ["chushkata", "bop", "skumriya", "mishka", "miki"];
// 
// console.log(subsets(preateli, 3));